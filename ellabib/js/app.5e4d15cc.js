(function(t){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},n={app:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("8a23"),n=a.n(i);n.a},"0a68":function(t,e,a){"use strict";var i=a("81a9"),n=a.n(i);n.a},"1d4f":function(t,e,a){},2320:function(t,e,a){"use strict";var i=a("d474"),n=a.n(i);n.a},"2daf":function(t,e,a){},"316c":function(t,e,a){"use strict";var i=a("906d"),n=a.n(i);n.a},4004:function(t,e,a){},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id="4678"},"4ff6":function(t,e,a){"use strict";var i=a("1d4f"),n=a.n(i);n.a},"54f4":function(t,e,a){},5673:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=a("2f62"),r=a("c6c6"),o=a.n(r);i["a"].use(n["a"]);var s=new n["a"].Store({state:{snackbar:{status:!1,value:"Felmeddelandetext",color:"green lighten-2",timeout:5e3,hasLink:!1,linkUrl:""},user:{id:2,firstname:"",class:"",school:"",pagesRead:0,booksRead:0,reviewsWritten:0,role:"",isLoggedIn:!0},isAdmin:!1,isLoading:!1,userAgent:{isMobile:null},books:[],authors:Array[Object],genres:Array[Object],highestRatedBooks:[],recentlyReviewedBooks:[],count:{},isMobile:null},getters:{isLoggedIn:function(t){return!!t.user},snackbar:function(t){return t.snackbar},isDeviceWithMic:function(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,!!navigator.getUserMedia}},mutations:{userLogout:function(t){t.user=null},userLogin:function(t,e){t.user=e},hideSnackbar:function(t){t.snackbar.status=!1},showSnackbar:function(t,e){t.snackbar=e},isLoading:function(t){t.isLoading=!0},isNotLoading:function(t){t.isLoading=!1},count:function(t,e){t.count=e},isMobile:function(t){var e=new o.a(window.navigator.userAgent);e.mobile()?t.userAgent.isMobile=!0:t.userAgent.isMobile=!1},changeAdminState:function(t){t.isAdmin=!t.isAdmin},books:function(t,e){t.books=e},genres:function(t,e){t.genres=e},addAuthor:function(t,e){t.authors.push(e)},authors:function(t,e){t.authors=e},recentlyReviewedBooks:function(t,e){t.recentlyReviewedBooks=e},highestRatedBooks:function(t,e){t.highestRatedBooks=e}}}),c=a("f309"),l=a("d051"),u=a.n(l);i["a"].use(c["a"]),i["a"].use(u.a);var d=new c["a"]({}),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("navbar"),a("v-content",[t.$store.state.isLoading?a("v-progress-linear",{staticClass:"ma-0",attrs:{color:"green lighten-2",indeterminate:!0}}):t._e(),a("router-view"),a("v-snackbar",{attrs:{timeout:t.snackbar.timeout,color:t.snackbar.color},model:{value:t.snackbar.status,callback:function(e){t.$set(t.snackbar,"status",e)},expression:"snackbar.status"}},[t.snackbar.hasLink?a("div",[a("a",{staticClass:"white--text",attrs:{target:"_blank",href:t.snackbar.linkUrl}},[t._v(t._s(t.snackbar.value)+" ")])]):a("div",[t._v(" "+t._s(t.snackbar.value)+" ")]),a("v-btn",{attrs:{text:""},nativeOn:{click:function(e){return t.$store.commit("hideSnackbar")}}},[t._v("Stäng")])],1)],1)],1)},f=[],h=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{color:"green lighten-3",dark:"",fixed:"",app:""}},[a("v-toolbar-items",[a("v-btn",{attrs:{text:"",to:"/"}},[a("v-icon",{staticClass:"mr-3"},[t._v("mdi-home")]),t._v(" Hem ")],1)],1),a("v-toolbar-items",[a("v-btn",{attrs:{to:"/books",text:""}},[t._v("Böcker")])],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{to:"/about",text:""}},[t._v("Om")])],1),a("v-toolbar-items",[t.$store.getters.isLoggedIn?a("v-btn",{attrs:{to:"/profile",text:""}},[a("v-icon",{staticClass:"mr-3"},[t._v("mdi-account")])],1):t._e()],1),t.isAdmin?a("v-toolbar-items",[a("v-btn",{attrs:{to:"/admin/post-book",text:""}},[t._v("Lägg till bok")]),a("v-btn",{attrs:{to:"/admin/activate-reviews",text:""}},[t._v("Recensioner")]),a("v-btn",{attrs:{text:""},on:{click:t.logout}},[t._v(" Logga ut ")])],1):t._e()],1)},m=[],b=a("bc3a"),p=a.n(b),k=p.a.create({baseURL:"https://api.ellabib.se",withCredentials:!0}),w={login:function(t){return k.post("auth/admin",t).then((function(t){return t.data}))},ip:function(){return k.get("auth/").then((function(t){return t.data}))},logout:function(){return k.get("auth/logout").then((function(t){return t.data}))}},_={images:"http://ellabib.se/images/",audio:"http://ellabib.se/audio/"},x={name:"navbar",components:{},data:function(){return{imagesUrl:_.images}},created:function(){this.$store.commit("isMobile")},computed:{isAdmin:function(){return this.$store.state.isAdmin},isDeviceWithWebRTC:function(){return this.$store.getters.isDeviceWithWebRTC}},methods:{logout:function(){w.logout(),this.$router.push({name:"frontpage"}),this.$store.commit("changeAdminState")}}},y=x,j=(a("a1f4"),a("2877")),C=a("6544"),R=a.n(C),V=a("40dc"),B=a("8336"),$=a("132d"),A=a("2fa4"),D=a("2a7f"),U=Object(j["a"])(y,g,m,!1,null,"4d1ead48",null),S=U.exports;function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(Object(a),!0).forEach((function(e){Object(h["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}R()(U,{VAppBar:V["a"],VBtn:B["a"],VIcon:$["a"],VSpacer:A["a"],VToolbarItems:D["a"]});var O={name:"app",components:{navbar:S},computed:I({},Object(n["b"])(["snackbar"]))},L=O,E=(a("034f"),a("7496")),P=a("a75b"),F=a("8e36"),M=a("2db4"),z=Object(j["a"])(L,v,f,!1,null,null,null),q=z.exports;R()(z,{VApp:E["a"],VBtn:B["a"],VContent:P["a"],VProgressLinear:F["a"],VSnackbar:M["a"]});var G=a("8c4f"),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("search-books"),a("v-container",[a("v-row",t._l(t.paginatedBooks,(function(t){return a("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("book-small",{staticClass:"justify-center",attrs:{book:t,align:"center"}})],1)})),1)],1),t.allBooksFetched?t._e():a("mugen-scroll",{attrs:{handler:t.incrementPage,"should-handle":!t.$store.getters.isLoading}})],1)},W=[],H=(a("fb6a"),a("996c")),Q=a.n(H),J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{justify:"center","no-gutters":""}},[t._l(t.$store.state.genres,(function(e){return a("v-col",{key:e.id},[a("v-tooltip",{attrs:{bottom:"",color:"blue"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{icon:"",width:"auto",height:"auto"}},n),[a("v-avatar",{attrs:{size:"55"}},[a("img",{staticClass:"genre-icon",class:{selected:t.selected==e},attrs:{src:""+t.imagesUrl+e.slug+".png"},on:{click:function(a){return t.toggleSelected(e)}}})])],1)]}}],null,!0)},[a("span",[t._v(t._s(e.name))])])],1)})),a("v-col",{attrs:{xs:"12"}},[a("v-btn",{staticClass:"ma-2",attrs:{fab:"",dark:"",color:"blue"},on:{click:t.toggleSearch}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify")])],1)],1)],2),a("v-slide-x-transition",[t.displaySearch?a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{solo:"","prepend-inner-icon":"mdi-magnify",label:"Sök..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1)],1):t._e()],1)],1)},X=[],K=(a("841c"),a("2ef0")),Y=a.n(K),Z={getAll:function(){return k.get("genres/").then((function(t){return t.data}))},create:function(t){return k.post("genres/",t).then((function(t){return t.data}))}},tt=(a("99af"),a("5319"),{getAll:function(){return k.get("books/").then((function(t){return t.data}))},get:function(t){return k.get("books/id/".concat(t)).then((function(t){return t.data}))},isReviewed:function(t,e){return k.get("books/reviewed/".concat(t,"/").concat(e)).then((function(t){return t.data}))},getFromSlug:function(t){return k.get("books/slug/".concat(t)).then((function(t){return t.data}))},getFromIsbn:function(t){return k.get("books/isbn/".concat(t)).then((function(t){return t.data}))},getRecentlyReviewed:function(){return k.get("books/recently/reviewed").then((function(t){return t.data}))},getHighestRated:function(){return k.get("books/highest").then((function(t){return t.data}))},publishBookFromIsbn:function(t,e){var a=t.replace(/\D/g,"");return k.post("books/publish/isbn",{isbn:a,genreId:e}).then((function(t){return t.data}))},publishBook:function(t){return k.post("books/publish/manual",t).then((function(t){return t.data}))},search:function(t){return k.get("books/search?query=".concat(t)).then((function(t){return t.data}))},searchFromGenre:function(t,e){return k.get("books/genre/".concat(t,"/search?query=").concat(e)).then((function(t){return t.data}))},count:function(){return k.get("books/count").then((function(t){return t.data}))},edit:function(t){return k.patch("books/edit",t).then((function(t){return t.data}))}}),et={name:"search-books",data:function(){return{imagesUrl:_.images,selected:"",displaySearch:!1,searchTerm:"",genres:[],queryParams:{genre:[]}}},watch:{searchTerm:Y.a.debounce((function(){this.searchBooks()}),500)},created:function(){this.$store.commit("isLoading"),this.getGenres(),this.$route.params.genre?this.addGenreToQuery(this.$route.params.genre):this.$route.params.forceSearch?(this.displaySearch=!0,this.searchTerm=this.$route.params.forceSearch,this.searchBooks()):this.getBooks()},methods:{toggleSelected:function(t){this.selected===t?this.selected="":this.selected=t,this.addGenreToQuery(t)},toggleSearch:function(){this.displaySearch=!this.displaySearch,this.searchTerm=""},addGenreToQuery:function(t){this.queryParams.genre[0]===t.slug?(this.getBooks(),this.queryParams.genre.pop()):(this.queryParams.genre[0]=t.slug,this.searchBooks())},getGenres:function(){var t=this;Z.getAll().then((function(e){t.$store.commit("genres",e.data),t.$route.params.genre&&t.$store.state.genres.forEach((function(e){e.id===t.$route.params.genre.id&&(t.selected=e)}))}))},getBooks:function(){var t=this;tt.getAll().then((function(e){t.$store.commit("books",e.data),t.$store.commit("isNotLoading")}))},searchBooks:function(){var t=this;this.queryParams.genre.length>0?tt.searchFromGenre(this.queryParams.genre,this.searchTerm).then((function(e){t.$store.commit("books",e.data)})):tt.search(this.searchTerm).then((function(e){t.$store.commit("books",e.data)})),this.$store.commit("isNotLoading")}}},at=et,it=(a("9753"),a("8212")),nt=a("62ad"),rt=a("a523"),ot=a("0fd9"),st=a("0789"),ct=a("8654"),lt=a("3a2f"),ut=Object(j["a"])(at,J,X,!1,null,null,null),dt=ut.exports;R()(ut,{VAvatar:it["a"],VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VIcon:$["a"],VRow:ot["a"],VSlideXTransition:st["d"],VTextField:ct["a"],VTooltip:lt["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"justyfi-center",attrs:{to:{name:"bok",params:{slug:t.book.slug}}}},[a("v-card",{attrs:{flat:"",color:"rgb(255, 0, 0, 0)",align:"center"}},[a("v-img",{staticClass:"white--text",attrs:{src:t.imageUrl,height:"300px","max-width":"220px"}}),a("v-card-actions",{staticClass:"justify-center"},[t._v(" "+t._s(t.book.title)+" ")])],1)],1)},ft=[],ht={name:"book-small",props:{book:Object},computed:{imageUrl:function(){return this.book.localImage?"".concat(this.imagesUrl).concat(this.book.imageUrl):this.book.imageUrl}},data:function(){return{imagesUrl:_.images}}},gt=ht,mt=a("b0af"),bt=a("99d9"),pt=a("adda"),kt=Object(j["a"])(gt,vt,ft,!1,null,null,null),wt=kt.exports;R()(kt,{VCard:mt["a"],VCardActions:bt["a"],VImg:pt["a"]}),a("9ddc");var _t={name:"books",metaInfo:{title:"Alla böcker"},components:{"book-small":wt,"search-books":dt,MugenScroll:Q.a},props:["genre","forceSearch"],data:function(){return{searchTerm:"",displaySearch:!1,selected:"",imagesUrl:_.images,busy:!1,image:"",genres:[],queryParams:{genre:[]},page:1,booksToDisplay:10}},computed:{paginatedBooks:function(){return this.$store.state.books.slice(0,this.page*this.booksToDisplay)},allBooksFetched:function(){return this.$store.state.books.length===this.paginatedBooks.length}},methods:{incrementPage:function(){this.page+=1}}},xt=_t,yt=Object(j["a"])(xt,N,W,!1,null,null,null),jt=yt.exports;R()(yt,{VCol:nt["a"],VContainer:rt["a"],VRow:ot["a"]});var Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-carousel",{attrs:{height:"300px",continuos:"",cycle:"","hide-delimiters":"","show-arrows-on-hover":!0}},[a("v-carousel-item",{staticClass:"green lighten-4"},[a("router-link",{attrs:{to:"/books"}},[0!=t.$store.state.count.books?a("div",{staticClass:"header-text"},[a("span",{staticClass:"one"},[t._v(" "+t._s(t.$store.state.count.books)+" ")]),a("span",[t._v("böcker")])]):t._e()])],1),a("v-carousel-item",{staticClass:"green lighten-4"},[a("router-link",{attrs:{to:"/books"}},[0!=t.$store.state.count.books?a("div",{staticClass:"header-text"},[a("span",{staticClass:"one"},[t._v(" "+t._s(t.$store.state.count.reviews)+" ")]),a("span",[t._v("recensioner")])]):t._e()])],1)],1),a("v-container",{attrs:{fluid:""}},[a("book-list",{staticClass:"list",attrs:{books:t.$store.state.highestRatedBooks}}),a("book-list",{staticClass:"list",attrs:{title:"Nyligen recenserade",books:t.$store.state.recentlyReviewedBooks}})],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("barcode-scanner",{on:{scanned:t.barcodeScanned}})],1),t.$store.state.userAgent.isMobile?a("v-btn",{attrs:{color:"blue lighten-3",fab:"",direction:"bottom"},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("mdi-barcode-scan")])],1):t._e()],1)},Rt=[],Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.title))]),a("swiper",{ref:"swiper",attrs:{options:t.swiperOptions}},t._l(t.books,(function(e){return a("swiper-slide",{key:e.id},[a("router-link",{staticClass:"link",attrs:{to:{name:"bok",params:{slug:e.slug}}}},[a("v-rating",{staticClass:"mb-5",attrs:{dense:"",medium:"",readonly:""},model:{value:e.rating,callback:function(a){t.$set(e,"rating",a)},expression:"book.rating"}}),e.localImage?a("img",{staticClass:"front-img",attrs:{src:""+t.imagesUrl+e.imageUrl}}):t._e(),e.localImage?t._e():a("img",{staticClass:"front-img",attrs:{src:e.imageUrl}})],1)],1)})),1)],1)},Bt=[],$t=a("7212"),At=a.n($t);a("a7a3"),i["a"].use(At.a);var Dt={name:"book-list",props:["books","title"],data:function(){return{imagesUrl:_.images,swiperOptions:{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",slidesPerView:5,spaceBetween:50,autoplay:4e3,breakpoints:{1400:{slidesPerView:4,spaceBetween:30},1e3:{slidesPerView:3,spaceBetween:30},750:{slidesPerView:2,spaceBetween:30},520:{slidesPerView:1,spaceBetween:30}}}}}},Ut=Dt,St=(a("cf52"),a("1d4d")),Tt=Object(j["a"])(Ut,Vt,Bt,!1,null,"6234995d",null),It=Tt.exports;R()(Tt,{VRating:St["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Scanner")]),a("v-card-text",[a("v-row",{attrs:{justify:"center"}},[a("video",{attrs:{id:"video",height:"300px",width:"300px"}})]),t._v(" "+t._s(t.text)+" ")],1)],1)},Lt=[],Et=a("e588"),Pt={name:"barcode-scanner",data:function(){return{}},mounted:function(){var t=this,e=new Et["BrowserQRCodeReader"];e.listVideoInputDevices().then((function(a){var i=a[0].deviceId;e.decodeFromInputVideoDevice(i,"video").then((function(e){console.log(e),t.$emit("scanned",e)})).then((function(e){return t.text=e})).catch((function(t){return console.error(t)}))})).catch((function(t){return console.error(t)}))},methods:{}},Ft=Pt,Mt=Object(j["a"])(Ft,Ot,Lt,!1,null,null,null),zt=Mt.exports;R()(Mt,{VCard:mt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VRow:ot["a"]});var qt=a("b3b5");a("a7a3"),i["a"].use(qt["a"]),i["a"].use(At.a);var Gt={name:"frontpage",metaInfo:{title:"Startsida"},components:{"book-list":It,BarcodeScanner:zt},created:function(){this.getRecentlyReviewed(),this.getHighestRated(),this.getCount()},data:function(){return{dialog:!1,swiperOptions:{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",slidesPerView:1,slidesPerGroup:1,centeredSlides:!0,autoplay:5e3}}},methods:{barcodeScanned:function(t){console.log(t)},getCount:function(){var t=this;tt.count().then((function(e){t.$store.commit("count",{books:e.data.books.count,reviews:e.data.reviews.count})}))},getRecentlyReviewed:function(){var t=this;tt.getRecentlyReviewed().then((function(e){t.$store.commit("recentlyReviewedBooks",e.data)}))},getHighestRated:function(){var t=this;tt.getHighestRated().then((function(e){t.$store.commit("highestRatedBooks",e.data)}))}}},Nt=Gt,Wt=(a("e713"),a("5e66")),Ht=a("3e35"),Qt=a("169a"),Jt=Object(j["a"])(Nt,Ct,Rt,!1,null,"2305f8f4",null),Xt=Jt.exports;R()(Jt,{VBtn:B["a"],VCarousel:Wt["a"],VCarouselItem:Ht["a"],VContainer:rt["a"],VDialog:Qt["a"],VIcon:$["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center",cols:"12",md:"4"}},[a("v-img",{attrs:{src:t.imageUrl,height:"340px","max-width":"220px"}})],1),a("v-col",{attrs:{cols:"12",md:"8",l:"10"}},[a("v-card",{attrs:{flat:"",color:"rgb(255, 0, 0, 0)"}},[a("v-card-title",[t._v(" "+t._s(t.currentBook.title))]),a("v-card-subtitle",{staticClass:"text-left"},[t._v("av: "),a("router-link",{staticClass:"authorlink",attrs:{to:{name:"books",params:{forceSearch:t.author.fullName}}}},[t._v(" "+t._s(t.author.fullName)+" ")])],1),a("v-card-text",{staticClass:"text-left"},[a("v-container",{staticClass:"pa-0"},[a("v-row",[t.reviews.length>0&&t.reviews[0].descriptionAudioUrl?a("v-col",{staticClass:"text-center pa-0",attrs:{cols:"12",sm:"2"}},[a("audio-player",{staticClass:"audio-player btn",attrs:{sources:t.formattedAudioUrl(t.reviews[0].descriptionAudioUrl),audioInfo:{book:{title:t.currentBook.title,id:t.currentBook.id},type:"description"}}})],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"10"}},[t._v(" "+t._s(t.currentBook.description)+" ")])],1)],1),a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("book-toolbar",{attrs:{genre:t.genre,currentBook:t.currentBook},on:{bookReviewed:t.bookReviewed}})],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-list",{attrs:{color:"rgb(255, 0, 0, 0)",dense:""}},[a("v-list-item",[a("v-list-item-content",{staticClass:"pa-0"},[t._v("Hur många har läst boken?")]),a("v-list-item-content",{staticClass:"pa-0"},[a("p",{staticClass:"text-right"},[t._v(" "+t._s(t.currentBook.readCount)+" ")])])],1),a("v-list-item",[a("v-list-item-content",{staticClass:"pa-0"},[t._v("Genre")]),a("v-list-item-content",{staticClass:"pa-0"},[a("p",{staticClass:"text-right"},[t._v(" "+t._s(t.genre.name)+" ")])])],1),a("v-list-item",[a("v-list-item-content",{staticClass:"pa-0"},[t._v("Sidor")]),a("v-list-item-content",{staticClass:"pa-0"},[a("p",{staticClass:"text-right"},[t._v(" "+t._s(t.currentBook.pages)+" ")])])],1),a("v-list-item",[a("v-list-item-content",{staticClass:"pa-0"},[t._v("Betyg")]),a("v-list-item-content",{staticClass:"pa-0 text-right"},[a("v-rating",{attrs:{dense:"",medium:"","half-increments":""},model:{value:t.currentBook.rating,callback:function(e){t.$set(t.currentBook,"rating",e)},expression:"currentBook.rating"}})],1)],1)],1)],1)],1),t.reviews.length>0?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"text-left pa-0"},[t._v("Recensioner")]),a("v-divider")],1),t._l(t.reviews,(function(e){return a("v-col",{key:e.id,attrs:{cols:"12 pt-0"}},[a("v-card",{staticClass:"text-left",attrs:{flat:"",color:"rgb(255, 0, 0, 0)"}},[a("v-card-title",[t._v(" Publicerad den "+t._s(t.formattedDate(e.createdAt))+" "),a("v-spacer"),a("v-rating",{attrs:{dense:"",medium:"","half-increments":""},model:{value:e.rating,callback:function(a){t.$set(e,"rating",a)},expression:"review.rating"}})],1),a("v-card-text",{staticClass:"text-left"},[a("v-container",{staticClass:"pa-0"},[a("v-row",[a("v-col",{staticClass:"pa-0",attrs:{cols:"12",sm:"2",la:"1"}},[e.reviewAudioUrl?a("audio-player",{staticClass:"text-center pa-0",attrs:{sources:t.formattedAudioUrl(e.reviewAudioUrl),audioInfo:{book:{title:t.currentBook.title,id:t.currentBook.id},type:"review"}}}):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"10",la:"11"}},[t._v(" "+t._s(e.review)+" ")])],1)],1)],1)],1),t.reviews.length>0?a("v-divider"):t._e()],1)}))],2):t._e()],1)},Yt=[],Zt=(a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.dialogSimple,callback:function(e){t.dialogSimple=e},expression:"dialogSimple"}},[a("simple-review",{attrs:{currentBook:t.currentBook},on:{closeDialog:t.closeDialog}})],1),a("v-dialog",{attrs:{persistent:""},model:{value:t.dialogAdvanced,callback:function(e){t.dialogAdvanced=e},expression:"dialogAdvanced"}},[a("publish-review",{attrs:{book:t.currentBook},on:{closeDialog:t.closeDialog}})],1),a("v-row",[a("v-spacer",{staticClass:"d-none d-sm-flex"}),a("v-btn",{staticClass:"ma-2",attrs:{icon:"",to:{name:"books",params:{genre:t.genre}},width:"auto",height:"auto"}},[a("v-avatar",{attrs:{size:"60"}},[a("img",{staticClass:"genre-icon",attrs:{src:""+t.imagesUrl+t.genre.slug+".png"}})])],1),t.$store.getters.isLoggedIn&&!t.isReviewedByUser?a("div",[a("v-btn",{staticClass:"ma-2",attrs:{fab:"",color:"purple lighten-3"},on:{click:function(e){t.dialogAdvanced=!0},closeDialog:t.closeDialog}},[a("v-icon",{staticClass:"pt-2",attrs:{large:""}},[t._v("mdi-border-color")])],1),a("v-btn",{staticClass:"ma-2",attrs:{fab:"",color:"blue lighten-2"},on:{click:function(e){t.dialogSimple=!0},closeDialog:t.closeDialog}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-star")])],1)],1):t._e()],1)],1)}),te=[],ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"headline"},[t._v("Betygsätt "+t._s(t.currentBook.title))])]),a("v-card-text",{staticClass:"pb-0"},[a("span",[t._v("Vad tyckte du om boken?")]),a("v-container",[a("v-rating",{attrs:{dense:"",ripple:"",hover:"",large:""},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v("Stäng")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.publishSimpleReview}},[t._v("Betygssätt")]),a("v-spacer")],1)],1)},ae=[],ie={getAll:function(t){return k.get("reviews/id/".concat(t)).then((function(t){return t.data}))},create:function(t){return k.post("reviews/",t).then((function(t){return t.data}))},publishSimple:function(t){return k.post("reviews/simple",t).then((function(t){return t.data}))},getInactive:function(){return k.get("reviews/inactive").then((function(t){return t.data}))},bulkActivate:function(t){return k.patch("reviews/",t).then((function(t){return t.data}))},editReviewAudio:function(t){return k.patch("reviews/audio/edit",t).then((function(t){return t.data}))},incrementPlay:function(t){return k.patch("reviews/increment",t).then((function(t){return t.data}))},updateRating:function(t){return k.patch("reviews/rating",t).then((function(t){return t.data}))},updateText:function(t){return k.patch("reviews/text",t).then((function(t){return t.data}))},deleteReview:function(t){return k.patch("reviews/delete",t).then((function(t){return t.data}))}},ne={name:"simple-review",props:{currentBook:Object},data:function(){return{rating:0}},methods:{publishSimpleReview:function(){var t=this;ie.publishSimple({rating:this.rating,bookId:this.currentBook.id,userId:this.$store.state.user.id}).then((function(e){t.$emit("closeDialog",e)}))}}},re=ne,oe=Object(j["a"])(re,ee,ae,!1,null,null,null),se=oe.exports;R()(oe,{VBtn:B["a"],VCard:mt["a"],VCardActions:bt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VContainer:rt["a"],VRating:St["a"],VSpacer:A["a"]});var ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"headline"},[t._v("Recensera "+t._s(t.currentBook.title)+" ")])]),a("v-container",[t.publishing?a("v-row",[a("v-col",[a("v-progress-circular",{attrs:{indeterminate:"",size:50}}),a("span",{staticClass:"ma-5"},[t._v("Publicerar...")])],1)],1):a("v-form",[a("v-row",{},[a("v-col",{staticClass:"text-left"},[t._v(" "+t._s(t.currentBook.description)+" ")])],1),a("v-row",{staticClass:"pa-0"},[a("v-col",{staticClass:"pa-0"},[t.$store.getters.isDeviceWithMic?a("vue-record",{staticClass:"pt-0 audio-recorder",attrs:{source:"description",blob:t.audio.description},on:{updateBlob:t.updateAudio}}):t._e()],1)],1),a("v-row",{staticClass:"pb-0"},[a("v-col",{staticClass:"pb-0"},[a("span",{staticClass:"pb-2"},[t._v("Recension")]),a("v-textarea",{attrs:{outlined:"",placeholder:"Skriv din egna bokrecension här.","auto-grow":""},model:{value:t.review.review,callback:function(e){t.$set(t.review,"review",e)},expression:"review.review"}})],1)],1),a("v-row",{staticClass:"pa-0"},[a("v-col",{staticClass:"pa-0"},[t.$store.getters.isDeviceWithMic?a("vue-record",{staticClass:"pt-0 audio-recorder",attrs:{source:"review",blob:t.audio.review},on:{updateBlob:t.updateAudio}}):t._e()],1)],1),a("v-row",[a("v-col",[a("v-rating",{attrs:{large:"",ripple:"",hover:"",dense:""},model:{value:t.review.rating,callback:function(e){t.$set(t.review,"rating",e)},expression:"review.rating"}})],1)],1),a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v("Stäng")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.postReview}},[t._v("Skicka")])],1)],1)],1)],1)],1)},le=[],ue=(a("e01a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}]},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isRecording,expression:"isRecording"}],attrs:{fab:""},on:{click:t.stopRecording}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-stop")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isRecording,expression:"!isRecording"}],attrs:{fab:""},on:{click:t.startRecording}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-microphone")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isRecording,expression:"isRecording"}],attrs:{fab:""}},[t._v(" "+t._s(t.recordingLength)+" ")])],1),t.dataUrl.length>0?a("audio-editor",{ref:"editor",staticClass:"editor",attrs:{dataUrl:t.dataUrl,source:t.source,isEditing:t.isEditing},on:{cut:t.updateData,trashRecording:t.trashRecording}}):t._e()],1)],1),a("div")],1)}),de=[],ve=(a("b680"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("a9ee")),fe=a.n(ve),he=a("0bac"),ge=a.n(he),me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pt-0"},[a("v-row",{staticClass:"waveform",attrs:{id:t.waveformId},on:{click:t.setTime}}),a("v-row",[a("v-col",[t.isPlaying?t._e():a("v-btn",{attrs:{fab:""},on:{click:t.play}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-play")])],1),t.isPlaying?a("v-btn",{attrs:{fab:""},on:{click:t.pause}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-pause")])],1):t._e(),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],attrs:{fab:""}},[t._v(" "+t._s(t.roundedTime))]),a("v-btn",{attrs:{fab:""},on:{click:t.cutBlob}},[a("v-icon",[t._v("mdi-content-cut")])],1),t.history.length>0?a("v-btn",{attrs:{fab:""},on:{click:t.undoSlice}},[a("v-icon",[t._v("mdi-undo")])],1):t._e(),a("v-btn",{attrs:{fab:""},on:{click:t.trashRecording}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1)},be=[],pe=(a("ace4"),a("acd8"),a("8896")),ke=a.n(pe),we=a("8f7c"),_e=a.n(we),xe=a("fea2"),ye=a.n(xe),je=a("8433"),Ce=a.n(je),Re={name:"audio-editor",data:function(){return{wavesurfer:null,history:[],time:{selected:0,length:""},isPlaying:!1}},props:{dataUrl:String,source:String,isEditing:Boolean},computed:{roundedTime:function(){return this.time.selected.toFixed(1)},waveformId:function(){return"waveform-".concat(this.source)}},watch:{dataUrl:function(){this.resetWavesurfer()}},created:function(){var t=this;this.$nextTick((function(){t.initiateWavesurfer()}))},methods:{trashRecording:function(){this.$emit("trashRecording")},resetWavesurfer:function(){this.wavesurfer.destroy(),this.initiateWavesurfer()},cutBlob:function(){var t=this.wavesurfer.regions.list[1],e=t.start,a=t.end;this.newSlice(1e3*e,1e3*a),this.isEdited=!0},undoSlice:function(){this.audiobufferToWav(this.history.pop())},newSlice:function(t,e){var a=this;_e()(this.wavesurfer.backend.buffer,t,e,(function(t,e){a.history.push(a.wavesurfer.backend.buffer),a.audiobufferToWav(e)}))},audiobufferToWav:function(t){var e=ye()(t),a=new Blob([new DataView(e)],{type:"audio/wav"});this.$emit("cut",a,this.source)},initiateWavesurfer:function(){var t=this;this.wavesurfer=ke.a.create({container:"#".concat(this.waveformId),waveColor:"violet",plugins:[Ce.a.create({enableDragSelection:!1})]}),this.wavesurfer.load(this.dataUrl),this.wavesurfer.on("ready",(function(){var e=t.wavesurfer.getDuration();t.wavesurfer.addRegion({id:1,start:.05*e,end:.95*e,resize:!0,drag:!1,color:"rgba(0, 0, 0, 0.3)"})}))},play:function(){var t=this;this.isEditing&&(this.wavesurfer.playPause(),this.isPlaying=!0,this.interval=setInterval((function(){var e=parseFloat(t.wavesurfer.getCurrentTime());t.$set(t.time,"selected",e)}),100))},pause:function(){this.isEditing&&(this.wavesurfer.pause(),this.isPlaying=!1,clearInterval(this.interval))},setTime:function(){var t=this;this.$nextTick((function(){var e=parseFloat(t.wavesurfer.getCurrentTime());t.$set(t.time,"selected",e)}))}}},Ve=Re,Be=(a("e374"),Object(j["a"])(Ve,me,be,!1,null,null,null)),$e=Be.exports;R()(Be,{VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VIcon:$["a"],VRow:ot["a"]});var Ae=a("bd19"),De=a.n(Ae),Ue={components:{"audio-editor":$e,Icon:De.a},props:{blob:"",source:"",options:{default:function(){return{type:"audio",mimeType:"video/webm",bufferSize:0,sampleRate:44100,leftChannel:!1,disableLogs:!1}}}},data:function(){return{localBlob:this.blob,dataUrl:"",maxLength:30,Timer:ge()(),recordingLength:"",isRecording:!1,isEditing:!1,newRecording:0}},watch:{recordingLength:function(){this.recordingLength>this.maxLength&&this.stopRecording()}},methods:{trashRecording:function(){this.isEditing=!1,this.dataUrl="",this.$emit("updateBlob",null,this.source)},updateData:function(t){this.dataUrl=URL.createObjectURL(t),this.localBlob=t,this.$emit("updateBlob",t,this.source)},startTimer:function(){var t=this;this.Timer.start(),this.recordingLength=0,this.interval=window.setInterval((function(){var e=t.Timer.elapsedTime();t.recordingLength=(e/1e3).toFixed(1)}),500)},stopTimer:function(t){this.updateData(t),window.clearInterval(this.interval),this.isEditing=!0},captureUserMedia:function(t,e,a){var i=!!/BB10|BlackBerry/i.test(navigator.userAgent||"");if(i&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia))return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(t,e,a);navigator.mediaDevices.getUserMedia(t).then(e).catch(a)},_addStreamStopListener:function(t,e){var a="ended";"oninactive"in t&&(a="inactive"),this._stream.addEventListener(a,(function(){e(),e=function(){}}),!1),this._stream.getAudioTracks().forEach((function(t){t.addEventListener(a,(function(){e(),e=function(){}}),!1)}))},startRecording:function(){var t=this;this.captureUserMedia({audio:!0},(function(e){t.$emit("record:start"),t.isRecording=!0,t._stream=e,t._recordRTC=fe()(e,t.options),t._recordRTC.startRecording(),t._addStreamStopListener(e,(function(){t.isRecording=!1}))}),(function(e){t.$emit("record:error"),t.isRecording=!1})),this.startTimer()},stopRecording:function(){var t=this;this._recordRTC.stopRecording((function(){t._stream.stop(),t.stopTimer(t._recordRTC.getBlob())}))},deleteRecording:function(){this.isEditing=!1}},destroyed:function(){this.stopRecording()}},Se=Ue,Te=Object(j["a"])(Se,ue,de,!1,null,null,null),Ie=Te.exports;R()(Te,{VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VIcon:$["a"],VRow:ot["a"]});var Oe={name:"publish-review",components:{"vue-record":Ie},props:["book"],data:function(){return{currentBook:{},review:{review:"",rating:0,userId:this.$store.state.user.id,bookId:null},audio:{description:null,review:null},publishing:!1}},created:function(){this.getData()},computed:{reviewFormData:function(){var t=this,e=new FormData;return Object.keys(this.review).forEach((function(a){e.append(a,t.review[a])})),this.audio.description&&e.append("descriptionRecording",this.audio.description,this.$route.params.slug),this.audio.review&&e.append("reviewRecording",this.audio.review,this.$route.params.slug),e}},methods:{resetFields:function(){this.review.review="",this.review.rating=0,this.audio.description=null,this.audio.review=null},updateAudio:function(t,e){this.audio[e]=t},getData:function(){this.book?(this.currentBook=this.book,this.review.bookId=this.book.id):this.getBookFromSlug()},getBookFromSlug:function(){var t=this;tt.getFromSlug(this.$route.params.slug).then((function(e){t.currentBook=e.data,t.review.bookId=e.data.id}))},postReview:function(){var t=this;this.publishing=!0,ie.create(this.reviewFormData).then((function(e){t.$emit("closeDialog",e),t.resetFields(),t.publishing=!1}))}}},Le=Oe,Ee=a("4bd4"),Pe=a("490a"),Fe=a("a844"),Me=Object(j["a"])(Le,ce,le,!1,null,null,null),ze=Me.exports;R()(Me,{VBtn:B["a"],VCard:mt["a"],VCardTitle:bt["d"],VCol:nt["a"],VContainer:rt["a"],VForm:Ee["a"],VProgressCircular:Pe["a"],VRating:St["a"],VRow:ot["a"],VTextarea:Fe["a"]});var qe={name:"book-toolbar",components:{SimpleReview:se,PublishReview:ze},props:{currentBook:Object,genre:Object},data:function(){return{dialogSimple:!1,dialogAdvanced:!1,imagesUrl:_.images,isReviewedByUser:!0}},created:function(){var t=this;tt.isReviewed(this.$route.params.slug,this.$store.state.user.id).then((function(e){t.isReviewedByUser=e.isReviewedByUser}))},methods:{closeDialog:function(t){t&&this.$emit("bookReviewed"),this.dialogSimple=!1,this.dialogAdvanced=!1}}},Ge=qe,Ne=Object(j["a"])(Ge,Zt,te,!1,null,null,null),We=Ne.exports;R()(Ne,{VAvatar:it["a"],VBtn:B["a"],VContainer:rt["a"],VDialog:Qt["a"],VIcon:$["a"],VRow:ot["a"],VSpacer:A["a"]});var He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[t.playing&&t.small?a("v-btn",{attrs:{fab:"",small:"",color:"green lighten-2"},on:{click:t.togglePlayback}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pause")])],1):t._e(),t.playing&&!t.small?a("v-btn",{attrs:{fab:"",color:"green lighten-2"},on:{click:t.togglePlayback}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-pause")])],1):t._e(),!t.playing&&t.small?a("v-btn",{attrs:{color:"green lighten-2",fab:"",small:""},on:{click:t.togglePlayback}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-play")])],1):t._e(),t.playing||t.small?t._e():a("v-btn",{attrs:{color:"green lighten-2",fab:""},on:{click:t.togglePlayback}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-play")])],1)],1)],1)],1)},Qe=[],Je=a("017a"),Xe={mixins:[Je["a"]],props:["audioInfo","small"],data:function(){return{played:!1,book:{title:this.audioInfo.book.title,id:this.audioInfo.book.id},type:this.audioInfo.type,audioId:this.audioInfo.id}},computed:{playDuration:function(){return this.seek/this.duration},gaCategory:function(){return"review"===this.type?"Recension":"Beskrivning"}},watch:{playDuration:function(){this.something>.3&&!this.played&&!this.admin&&(this.gaPlay(),this.incrementCounter(),this.played=!0)}},methods:{gaPlay:function(){this.$ga.event({eventCategory:"Ljud",eventAction:this.book.title,eventLabel:this.gaCategory})},incrementCounter:function(){ie.incrementPlay({reviewId:this.audioId,type:this.type})},reset:function(){this.setSeek(0),this.played=!1,this.play()}}},Ke=Xe,Ye=(a("73c9"),Object(j["a"])(Ke,He,Qe,!1,null,"4d48e7e6",null)),Ze=Ye.exports;R()(Ye,{VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VIcon:$["a"],VRow:ot["a"]});var ta=a("c1df"),ea=a.n(ta),aa=(a("5fbd"),{components:{"audio-player":Ze,BookToolbar:We},data:function(){return{imagesUrl:_.images,audioUrl:_.audio,reviews:[],currentBook:{},author:{fullName:"",id:null},pausePlayer:{status:!1,id:null},genre:{name:"",slug:"",id:null}}},metaInfo:function(){return{title:this.currentBook.title}},computed:{imageUrl:function(){return this.currentBook.localImage?"".concat(this.imagesUrl).concat(this.currentBook.imageUrl):this.currentBook.imageUrl}},created:function(){var t=this;this.$nextTick((function(){t.getBookFromSlug()}))},methods:{bookReviewed:function(){this.getBookFromSlug(),this.$store.commit("showSnackbar",{status:!0,value:"Recension publicerad!",color:"green lighten-2",timeout:5e3,hasLink:!1})},inQr:function(t){return Y.a.findIndex(this.$store.state.qrArray,{id:t})>-1},formattedAudioUrl:function(t){return[this.audioUrl+t]},formattedDate:function(t){return ea()(t).format("Do MMMM")},randomizeNumber:function(t){return Math.floor(Math.random()*(t+1))},getBookFromSlug:function(){var t=this;tt.getFromSlug(this.$route.params.slug).then((function(e){if(e.data.reviews.length>0){var a=e.data.reviews;t.reviews=a}t.currentBook=e.data,t.genre=e.data.genres[0],e.data.authors.length>0&&(t.author.fullName="".concat(e.data.authors[0].firstname," ").concat(e.data.authors[0].lastname),t.author.id=e.data.authors[0].id)}))},getReviews:function(t){var e=this;ie.getAll(t).then((function(t){e.reviews=t.data}))}}}),ia=aa,na=(a("0a68"),a("ce7e")),ra=a("8860"),oa=a("da13"),sa=a("5d23"),ca=Object(j["a"])(ia,Kt,Yt,!1,null,"2ef3cfe4",null),la=ca.exports;R()(ca,{VCard:mt["a"],VCardSubtitle:bt["b"],VCardText:bt["c"],VCardTitle:bt["d"],VCol:nt["a"],VContainer:rt["a"],VDivider:na["a"],VImg:pt["a"],VList:ra["a"],VListItem:oa["a"],VListItemContent:sa["a"],VRating:St["a"],VRow:ot["a"],VSpacer:A["a"]});var ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[0==t.reviews.length?a("v-container",[a("h1",[t._v("Inga recensioner att aktivera")])]):a("v-container",{staticClass:"pt-0"},[a("v-row",[a("v-col",[a("h1",[t._v("Aktivera recensioner")])])],1),a("v-row",[a("v-data-table",{attrs:{"hide-default-footer":!0,headers:t.headers,items:t.reviews},scopedSlots:t._u([{key:"header.selection",fn:function(e){e.item;return[a("v-checkbox",{on:{change:t.selectAll}})]}},{key:"item.rating",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.rating)+"/5 ")]}},{key:"item.selection",fn:function(e){var i=e.item;return[a("v-checkbox",{attrs:{value:i.id},model:{value:t.selectedReviews,callback:function(e){t.selectedReviews=e},expression:"selectedReviews"}})]}},{key:"item.title",fn:function(e){var i=e.item;return[a("router-link",{staticClass:"link",attrs:{to:{name:"bok",params:{slug:i.slug}}}},[t._v(t._s(i.title))])]}},{key:"item.description",fn:function(e){var i=e.item;return[a("v-container",[a("v-row",[i.descriptionAudioUrl?a("v-col",{attrs:{cols:"2"}},[a("audio-player",{attrs:{sources:t.formattedAudioUrl(i.descriptionAudioUrl),small:!0,audioInfo:{book:{title:i.title,id:i.id},type:"description"}}})],1):t._e(),a("v-col",[a("span",{on:{click:function(e){return t.editReviewText("description",i.description,i.id)}}},[t._v(" "+t._s(i.description)+" ")])])],1)],1)]}},{key:"item.review",fn:function(e){var i=e.item;return[a("v-container",[a("v-row",[i.reviewAudioUrl?a("v-col",{attrs:{cols:"2"}},[a("audio-player",{attrs:{sources:t.formattedAudioUrl(i.reviewAudioUrl),small:!0,audioInfo:{book:{title:i.title,id:i.id},type:"review"}}})],1):t._e(),a("v-col",[a("span",{on:{click:function(e){return t.editReviewText("review",i.review,i.id)}}},[t._v(" "+t._s(i.review)+" ")])])],1)],1)]}},{key:"item.tools",fn:function(e){var i=e.item;return[i.reviewAudioUrl||i.descriptionAudioUrl?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.editAudio(i)}}},[a("v-icon",[t._v("mdi-content-cut")])],1):t._e(),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-delete")])],1)]}}])})],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",[a("v-btn",{on:{click:t.activateReviews}},[t._v(" Publicera ("+t._s(t.selectedReviews.length)+") ")])],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.editReviewTextDialog,callback:function(e){t.editReviewTextDialog=e},expression:"editReviewTextDialog"}},[a("edit-review-text",{attrs:{text:t.modal.text,type:t.modal.type,reviewId:t.modal.reviewId},on:{closeTextDialog:t.closeTextDialog}})],1),a("v-dialog",{model:{value:t.editAudioDialog,callback:function(e){t.editAudioDialog=e},expression:"editAudioDialog"}},[a("edit-review-audio",{attrs:{review:t.modal.review},on:{closeDialog:t.closeAudioDialog}})],1)],1)],1)},da=[],va=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("h2",[t._v("Beskrivning")])])],1),a("v-row",[a("v-col",[a("audio-editor",{staticClass:"editor",attrs:{dataUrl:t.formattedAudioUrl(t.local.audio.description,t.local.source.description),source:t.local.source.description,isEditing:!0},on:{cut:t.updateData}})],1)],1),a("v-row",[a("v-col",[a("h2",[t._v("Recension")])])],1),a("v-row",[a("v-col",[a("audio-editor",{staticClass:"editor",attrs:{dataUrl:t.formattedAudioUrl(t.local.audio.review,t.local.source.review),source:t.local.source.review,isEditing:!0},on:{cut:t.updateData}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red lighten-2"},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v("Stäng")]),a("v-btn",{attrs:{color:"blue lighten-2"},on:{click:t.editReview}},[t._v("Spara")])],1)],1)}),fa=[],ha={name:"edit-review-audio",components:{"audio-editor":$e},data:function(){return{reviewLocal:this.review,audioUrl:_.audio,local:{audio:{description:this.review.descriptionAudioUrl,review:this.review.reviewAudioUrl},blobs:{description:"",review:""},source:{description:"description",review:"review"},isCut:{description:!1,review:!1}}}},props:{review:Object},computed:{reviewFormData:function(){var t=new FormData;return t.append("reviewId",this.reviewLocal.id),t.append("descriptionRecording",this.local.blobs.description,this.reviewLocal.books[0].slug),t.append("reviewRecording",this.local.blobs.review,this.reviewLocal.books[0].slug),t}},methods:{formattedAudioUrl:function(t,e){return this.local.isCut[e]?this.local.audio[e]:"".concat(this.audioUrl).concat(t)},updateData:function(t,e){this.local.isCut[e]=!0;var a=URL.createObjectURL(t);this.local.audio[e]=a,this.local.blobs[e]=t},formattedDate:function(t){return ea()(t).format("Do MMMM")},editReview:function(){var t=this;ie.editReviewAudio(this.reviewFormData).then((function(){t.$emit("closeDialog")}))}}},ga=ha,ma=Object(j["a"])(ga,va,fa,!1,null,null,null),ba=ma.exports;R()(ma,{VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VRow:ot["a"]});var pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title"),a("v-card-text",[a("v-textarea",{attrs:{"auto-grow":"",filled:"",label:t.formattedType},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.$emit("closeTextDialog")}}},[t._v("Stäng")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.editText}},[t._v("Spara")])],1)],1)],1)},ka=[],wa={name:"edit-review-text",props:["reviewId","type","text"],data:function(){return{loading:!1}},computed:{formattedType:function(){return"description"===this.type?"Beskrivning":"Recension"}},methods:{editText:function(){var t=this;this.loading=!0,ie.updateText({reviewId:this.reviewId,type:this.type,text:this.text}).then((function(){t.$emit("closeTextDialog",{reviewId:t.reviewId,type:t.type,text:t.text})}))}}},_a=wa,xa=(a("e06e"),Object(j["a"])(_a,pa,ka,!1,null,"776d898a",null)),ya=xa.exports;R()(xa,{VBtn:B["a"],VCard:mt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VRow:ot["a"],VTextarea:Fe["a"]});var ja=a("1881"),Ca=a.n(ja);i["a"].use(Ca.a);var Ra={components:{AudioPlayer:Ze,EditReviewAudio:ba,EditReviewText:ya},data:function(){return{show:!1,selectedReviews:[],editReviewTextDialog:!1,editAudioDialog:!1,reviews:[],headers:[{text:"",value:"selection"},{text:"ID",value:"id"},{text:"Titel",value:"title",width:"10%"},{text:"Beskrivning",value:"description",width:"30%"},{text:"Recension",value:"review",width:"30%"},{text:"Betyg",value:"rating"},{text:"Datum",value:"date"},{text:"Verktyg",value:"tools"}],modal:{review:"",text:"",reviewId:"",type:"",action:"",value:""},imagesUrl:_.images,audioUrl:_.audio}},created:function(){var t=this;this.$nextTick((function(){t.getReviews()}))},methods:{formatText:function(t){return t.slice(0,50)+" ..."},formattedAudioUrl:function(t){return[this.audioUrl+t]},selectAll:function(t){var e=this;t?this.reviews.forEach((function(t){e.selectedReviews.push(t.id)})):this.selectedReviews=[]},setRating:function(t,e){this.updateReviewRating(t,e)},closeAudioDialog:function(){this.editAudioDialog=!1},closeTextDialog:function(t){if(t){var e=Y.a.findIndex(this.reviews,{id:t.reviewId}),a=this.reviews[e];"review"===t.type?a.review=t.text:a.description=t.text}this.editReviewTextDialog=!1},editReviewText:function(t,e,a){this.modal.type=t,this.modal.text=e,this.modal.reviewId=a,this.editReviewTextDialog=!0},editAudio:function(t){this.modal.review=t,this.editAudioDialog=!0},getReviews:function(){var t=this;ie.getInactive().then((function(e){t.reviews=e.data}))},popReview:function(t){var e=Y.a.findIndex(this.reviews,{id:t});this.reviews.splice(e,1)},activateReviews:function(){var t=this;ie.bulkActivate(this.selectedReviews).then((function(){t.getReviews()}))},updateReviewRating:function(t,e){ie.updateRating({reviewId:e,rating:t}).then((function(){}))},deleteReview:function(t){var e=this;ie.deleteReview({reviewId:t}).then((function(){e.popReview(t)}))}}},Va=Ra,Ba=(a("eda3"),a("ac7c")),$a=a("8fea"),Aa=Object(j["a"])(Va,ua,da,!1,null,null,null),Da=Aa.exports;R()(Aa,{VBtn:B["a"],VCheckbox:Ba["a"],VCol:nt["a"],VContainer:rt["a"],VDataTable:$a["a"],VDialog:Qt["a"],VIcon:$["a"],VRow:ot["a"]});var Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:t.authorDialog,callback:function(e){t.authorDialog=e},expression:"authorDialog"}},[a("add-author",{on:{closeDialog:t.closeDialog}})],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.scannerDialog,callback:function(e){t.scannerDialog=e},expression:"scannerDialog"}},[a("barcode-scanner",{on:{scanned:t.barcodeScanned}})],1),a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("h1",[t._v("Lägg till bok")])]),a("v-row",{attrs:{justify:"center","no-gutters":""}},t._l(t.$store.state.genres,(function(e){return a("v-col",{key:e.id},[a("v-tooltip",{attrs:{bottom:"",color:"blue"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{icon:"",width:"auto",height:"auto"}},n),[a("v-avatar",{attrs:{size:"55"}},[a("img",{staticClass:"genre-icon",class:{selected:t.book.genre==e},attrs:{src:""+t.imagesUrl+e.slug+".png"},on:{click:function(a){return t.toggleSelected(e)}}})])],1)]}}],null,!0)},[a("span",[t._v(t._s(e.name))])])],1)})),1),a("v-row",{attrs:{justify:"center"}},[a("v-slide-x-transition",[t.book.imageUrl.length>0?a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-img",{attrs:{src:t.book.imageUrl,height:"300px","max-width":"220px"}})],1):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Genre, välj med knapparna",required:"",disabled:""},model:{value:t.book.genre.name,callback:function(e){t.$set(t.book.genre,"name",e)},expression:"book.genre.name"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:""}},[a("v-text-field",{attrs:{rules:t.rules,label:"ISBN","append-outer-icon":"mdi-barcode-scan",required:""},on:{"click:append-outer":function(e){t.scannerDialog=!0}},model:{value:t.isbn,callback:function(e){t.isbn=e},expression:"isbn"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:""}},[a("v-text-field",{attrs:{rules:t.rules,label:"Titel",required:""},model:{value:t.book.title,callback:function(e){t.$set(t.book,"title",e)},expression:"book.title"}})],1),a("v-col",{attrs:{cols:""}},[a("v-text-field",{attrs:{rules:t.rules,label:"Antal sidor",required:""},model:{value:t.book.pages,callback:function(e){t.$set(t.book,"pages",e)},expression:"book.pages"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:""}},[a("v-autocomplete",{attrs:{"append-outer-icon":"mdi-plus",items:t.$store.state.authors,"item-text":"fullName","item-value":"id",label:"Författare"},on:{"click:append-outer":function(e){t.authorDialog=!0}},model:{value:t.book.authors,callback:function(e){t.$set(t.book,"authors",e)},expression:"book.authors"}})],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{rules:t.rules,"auto-grow":"",label:"Beskrivning",required:""},model:{value:t.book.description,callback:function(e){t.$set(t.book,"description",e)},expression:"book.description"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:""}},[a("v-btn",{attrs:{color:"error"},on:{click:t.resetFields}},[t._v("Återställ fält")])],1),a("v-col",{attrs:{cols:""}},[t.newBook?a("v-btn",{on:{click:t.publishBook}},[t._v("Lägg till bok")]):a("v-btn",{on:{click:t.updateBook}},[t._v("Uppdatera bok")])],1)],1)],1)],1)],1)],1)},Sa=[],Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(" Lägg till författare ")])]),a("v-card-text",[a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Förnamn",required:"",rules:t.rules},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Efternamn",required:"",rules:t.rules},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:t.closeDialog}},[t._v("Stäng")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addAuthor}},[t._v("Spara")])],1)],1)],1)],1)],1)},Ia=[],Oa={getAll:function(){return k.get("authors/").then((function(t){return t.data}))},create:function(t){return k.post("authors/",t).then((function(t){return t.data}))},find:function(t){return k.post("authors/find",t).then((function(t){return t.data}))}},La={name:"add-author",data:function(){return{valid:!1,rules:[function(t){return!!t||"Fältet måste fyllas i"}],firstname:"",lastname:""}},computed:{author:function(){return{firstname:this.firstname,lastname:this.lastname}}},methods:{closeDialog:function(){this.resetFields(),this.$emit("closeDialog")},resetFields:function(){this.firstname="",this.lastname=""},addAuthor:function(){var t=this;Oa.create(this.author).then((function(e){t.$emit("closeDialog",e.data),t.resetFields()}))}}},Ea=La,Pa=Object(j["a"])(Ea,Ta,Ia,!1,null,null,null),Fa=Pa.exports;R()(Pa,{VBtn:B["a"],VCard:mt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VCol:nt["a"],VContainer:rt["a"],VForm:Ee["a"],VRow:ot["a"],VTextField:ct["a"]});var Ma={name:"post-book",components:{AddAuthor:Fa,BarcodeScanner:zt},computed:{isAdmin:function(){return this.$store.state.isAdmin}},watch:{isbn:Y.a.debounce((function(){this.book.isbn=this.isbn,this.fetchBookInfo()}),500)},data:function(){return{isbn:"",selected:"",scannerDialog:!1,authorDialog:!1,valid:!1,rules:[function(t){return!!t||"Fältet måste fyllas i"}],book:{isbn:"",id:"",title:"",pages:null,genre:"",authors:[],imageUrl:"",description:""},newBook:!0,imagesUrl:_.images}},methods:{barcodeScanned:function(t){console.log(t)},updateBook:function(){tt.edit({bookId:this.book.id,authorId:this.book.authors,genreId:this.book.genre.id,title:this.book.title,pages:this.book.pages,description:this.book.description}).then((function(t){console.log(t)}))},fetchBookInfo:function(){var t=this;tt.getFromIsbn(this.book.isbn).then((function(e){e.data?(t.book.title=e.data.title,t.book.pages=e.data.pages,t.book.description=e.data.description,t.book.imageUrl=e.data.imageUrl,e.newBook?e.data.author.newlyCreated&&(t.$store.commit("addAuthor",e.data.author),t.book.authors=e.data.author.id,console.log(t.book.authors)):(t.newBook=!1,t.book.id=e.data.id,t.book.authors=e.data.authors[0].id,t.book.genre=e.data.genres[0])):t.resetFields()}))},closeDialog:function(t){t&&(this.$store.commit("addAuthor",t),this.book.authors=t.id,this.authorDialog=!1),this.authorDialog=!1},toggleSelected:function(t){this.book.genre===t?this.book.genre="":this.book.genre=t},resetFields:function(){this.book={isbn:"",title:"",pages:null,genre:"",authors:[],imageUrl:""}},publishBook:function(){var t=this;tt.publishBook({isbn:this.book.isbn,title:this.book.title,pages:this.book.pages,genreId:this.book.genre.id,authorId:this.book.authors[0]}).then((function(e){var a=e.data[0];t.$store.commit("showSnackbar",{status:!0,value:"Boken är publicerad",color:"green lighten-2",timeout:3e3,hasLink:!0,linkUrl:"localhost:8080/book/".concat(a.slug)}),t.resetFields()}))}}},za=Ma,qa=(a("316c"),a("c6a6")),Ga=Object(j["a"])(za,Ua,Sa,!1,null,"5318fc50",null),Na=Ga.exports;R()(Ga,{VAutocomplete:qa["a"],VAvatar:it["a"],VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VDialog:Qt["a"],VForm:Ee["a"],VImg:pt["a"],VRow:ot["a"],VSlideXTransition:st["d"],VTextField:ct["a"],VTextarea:Fe["a"],VTooltip:lt["a"]});var Wa=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ha=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",[t._v("Ellabib")]),a("div",{staticClass:"text"})])}],Qa={name:"about",metaInfo:{title:"Om sidan"}},Ja=Qa,Xa=(a("2320"),Object(j["a"])(Ja,Wa,Ha,!1,null,"3b50b118",null)),Ka=Xa.exports,Ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",{attrs:{justify:"center"}},[a("h1",[t._v("Logga in")])]),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"5"}},[a("v-text-field",{attrs:{label:"Användarnamn",required:"",rules:t.rules},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"5"}},[a("v-text-field",{attrs:{label:"Password",required:"",rules:t.rules,type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{attrs:{type:"submit",color:"blue lighten-1"}},[t._v("Logga in")])],1)],1)],1)},Za=[],ti={name:"login",computed:{isAdmin:function(){return this.$store.state.isAdmin}},data:function(){return{valid:!1,rules:[function(t){return!!t||"Fältet måste fyllas i"}],username:"",password:"",loginFailed:!1}},created:function(){this.loginFailed=!1},methods:{login:function(){var t=this;w.login({username:this.username,password:this.password}).then((function(e){e.auth?t.changeAdminState():t.loginFailed=!0}))},changeAdminState:function(){this.$store.commit("changeAdminState"),this.$router.push({name:"activate-reviews"})}}},ei=ti,ai=(a("4ff6"),Object(j["a"])(ei,Ya,Za,!1,null,"47c0caf4",null)),ii=ai.exports;R()(ai,{VBtn:B["a"],VCol:nt["a"],VContainer:rt["a"],VForm:Ee["a"],VRow:ot["a"],VTextField:ct["a"]});var ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("PROFIL")]),a("v-btn",{on:{click:t.logOut}},[t._v("Logga ut")])],1)},ri=[],oi={getUser:function(t){return k.get("user/id/".concat(t)).then((function(t){return t.data}))}},si={name:"profile",created:function(){this.getUser()},methods:{logOut:function(){this.$store.commit("userLogout")},getUser:function(){var t=this;oi.getUser(this.$store.state.user.id).then((function(e){t.$store.commit("userLogin",e.data)}))}}},ci=si,li=Object(j["a"])(ci,ni,ri,!1,null,null,null),ui=li.exports;R()(li,{VBtn:B["a"],VContainer:rt["a"]});var di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("router-view")],1)},vi=[],fi={name:"admin",metaInfo:{title:"Adminpanelen"},created:function(){this.getAuthors()},methods:{getAuthors:function(){var t=this;Oa.getAll().then((function(e){t.$store.commit("authors",e.data)}))}}},hi=fi,gi=Object(j["a"])(hi,di,vi,!1,null,"56610745",null),mi=gi.exports;R()(gi,{VContainer:rt["a"]});var bi=a("58ca");i["a"].use(G["a"]),i["a"].use(bi["a"]);var pi=new G["a"]({mode:"history",routes:[{path:"/",name:"frontpage",component:Xt},{path:"/profile",name:"Profil",component:ui},{path:"/books",name:"books",component:jt},{path:"/book/:slug",name:"bok",component:la,props:!0},{path:"/about",name:"about",component:Ka},{path:"/login",name:"login",component:ii},{path:"/admin",name:"admin",component:mi,meta:{requiresAuth:!0},children:[{path:"activate-reviews",name:"activate-reviews",component:Da,meta:{requiresAuth:!0}},{path:"post-book",name:"post-book",component:Na,meta:{requiresAuth:!0}}]}]});pi.beforeEach((function(t,e,a){t.meta.requiresAuth&&(s.state.isAdmin?a():a({name:"login"})),a()}));var ki=pi;i["a"].config.productionTip=!1,new i["a"]({store:s,router:ki,vuetify:d,render:function(t){return t(q)}}).$mount("#app")},"6d7b":function(t,e,a){},"73c9":function(t,e,a){"use strict";var i=a("7e8d"),n=a.n(i);n.a},"7e8d":function(t,e,a){},"81a9":function(t,e,a){},"8a23":function(t,e,a){},"906d":function(t,e,a){},9753:function(t,e,a){"use strict";var i=a("4004"),n=a.n(i);n.a},a1f4:function(t,e,a){"use strict";var i=a("5673"),n=a.n(i);n.a},cf52:function(t,e,a){"use strict";var i=a("6d7b"),n=a.n(i);n.a},d474:function(t,e,a){},e06e:function(t,e,a){"use strict";var i=a("e55d"),n=a.n(i);n.a},e374:function(t,e,a){"use strict";var i=a("ecfc"),n=a.n(i);n.a},e55d:function(t,e,a){},e713:function(t,e,a){"use strict";var i=a("2daf"),n=a.n(i);n.a},ecfc:function(t,e,a){},eda3:function(t,e,a){"use strict";var i=a("54f4"),n=a.n(i);n.a}});
//# sourceMappingURL=app.5e4d15cc.js.map